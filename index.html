<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revista Digital: Libro Álbum Interactivo</title>
    <!-- Fuentes para tipografía elegante -->
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Iconos para UI -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            --book-width: 440px;  /* Ancho de una sola página */
            --book-height: 580px; /* Alto del libro */
            --bg-color: #eef2f3;
            --text-color: #2c3e50;
            --paper-color: #fdfbf7;
            --shadow-soft: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-deep: 0 20px 40px rgba(0,0,0,0.2);
            --accent-color: #5d4037; /* Marrón tierra suave */
            --tooltip-bg: rgba(255, 255, 255, 0.95);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-color);
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Evita scroll en el body principal */
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
        }

        /* --- UI: SIDEBAR --- */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            width: 60px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid #ddd;
            z-index: 100;
            box-shadow: var(--shadow-soft);
        }

        .project-title {
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: #888;
            font-size: 14px;
        }

        /* --- UI: TOP CONTROLS --- */
        .top-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .btn-icon {
            background: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-soft);
            color: #555;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon:hover {
            transform: translateY(-2px);
            color: var(--accent-color);
        }

        /* --- STAGE & BOOK CONTAINER --- */
        #stage {
            perspective: 2000px; /* Profundidad 3D esencial */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.5s ease;
            width: 100%;
            height: 100%;
        }

        .book {
            position: relative;
            width: var(--book-width); /* Ancho inicial (cerrado) */
            height: var(--book-height);
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
        }

        /* Cuando el libro está abierto, desplazamos el contenedor para centrar la doble página */
        .book.opened {
            transform: translateX(50%); /* Mueve el eje al centro */
        }

        /* --- NAVIGATION ARROWS --- */
        .nav-btn {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            box-shadow: var(--shadow-soft);
            cursor: pointer;
            z-index: 90;
            color: #333;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .nav-btn:hover {
            opacity: 1;
            transform: translateY(-50%) scale(1.1);
        }

        .prev-btn { left: 80px; }
        .next-btn { right: 40px; }

        .nav-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
            transform: translateY(-50%);
        }

        /* --- PAGE STRUCTURE (THE FLIP MECHANISM) --- */
        /* Una 'paper' es una hoja física con dos caras */
        .paper {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            transform-origin: left center; /* El punto de pivote es el lomo (izquierda) */
            transition: transform 0.9s cubic-bezier(0.645, 0.045, 0.355, 1); /* Efecto fluido */
            transform-style: preserve-3d;
            z-index: 1;
        }

        /* Lógica de Z-Index para apilar correctamente */
        .paper.flipped {
            transform: rotateY(-180deg);
            z-index: 0; /* Al voltear, se va al fondo de la pila izquierda */
        }

        /* Las caras de la hoja */
        .front, .back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-color: var(--paper-color);
            backface-visibility: hidden; /* Oculta la cara trasera cuando no se ve */
            border-radius: 4px 8px 8px 4px; /* Bordes redondeados externos */
            overflow: hidden;
            box-shadow: inset 5px 0 10px rgba(0,0,0,0.02); /* Sombra sutil interna */
        }

        /* La cara Front es la página derecha inicial */
        .front {
            z-index: 2;
        }

        /* La cara Back es la página izquierda cuando se voltea */
        .back {
            z-index: 1;
            transform: rotateY(180deg); /* Ya está rotada para verse al girar la hoja */
            border-radius: 8px 4px 4px 8px;
            box-shadow: inset -5px 0 10px rgba(0,0,0,0.02);
        }

        /* Sombra central (Spine) */
        .front::after {
            content: '';
            position: absolute;
            left: 0; top: 0; bottom: 0; width: 30px;
            background: linear-gradient(to right, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 100%);
            pointer-events: none;
        }
        .back::after {
            content: '';
            position: absolute;
            right: 0; top: 0; bottom: 0; width: 30px;
            background: linear-gradient(to left, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 100%);
            pointer-events: none;
        }

        /* --- CONTENT STYLING --- */
        .page-content {
            width: 100%;
            height: 100%;
            padding: 40px; /* Margen amplio editorial */
            display: flex;
            flex-direction: column;
            position: relative;
            background-size: cover;
            background-position: center;
        }

        /* Capa blanca semitransparente para legibilidad sobre fondos */
        .content-overlay {
            background: rgba(255,255,255,0.85);
            padding: 20px;
            width: 100%;
            height: 100%;
            border-radius: 2px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            border: 1px solid rgba(0,0,0,0.05);
        }

        h1, h2, h3 { font-family: 'Merriweather', serif; color: var(--accent-color); margin-bottom: 15px; }
        p { line-height: 1.8; font-size: 0.95rem; color: #4a4a4a; margin-bottom: 1rem; }
        .page-number { position: absolute; bottom: 20px; font-size: 0.8rem; color: #888; font-family: 'Merriweather', serif; }
        .front .page-number { right: 25px; }
        .back .page-number { left: 25px; }

        /* Estilos específicos de secciones */
        .cover-page .content-overlay { border: 4px double var(--accent-color); background: rgba(255,255,255,0.9); }
        .cover-page h1 { font-size: 2.5rem; margin-top: 20px; }
        .endpaper { background-image: url('https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&q=80&w=600'); opacity: 0.8; }
        .endpaper .content-overlay { background: rgba(255,255,255,0.4); border: none; }

        /* --- EDUCATIONAL TOOLTIP SYSTEM --- */
        .edu-icon {
            position: absolute;
            top: 25px;
            right: 25px;
            width: 24px;
            height: 24px;
            cursor: help;
            color: #FFD700; /* Dorado */
            font-size: 1.2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 50;
            animation: pulse 2s infinite;
        }

        .back .edu-icon { right: auto; left: 25px; } /* Ajuste para página izquierda */

        .edu-tooltip {
            position: absolute;
            top: 35px;
            right: 0;
            width: 280px;
            background: var(--tooltip-bg);
            backdrop-filter: blur(5px);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow-deep);
            border-left: 4px solid var(--accent-color);
            font-size: 0.85rem;
            text-align: left;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 60;
            color: #333;
        }

        .edu-tooltip h4 {
            color: var(--accent-color);
            margin-bottom: 5px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .edu-icon:hover + .edu-tooltip {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .back .edu-tooltip { right: auto; left: 0; border-left: none; border-right: 4px solid var(--accent-color); }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        /* --- RESPONSIVE ADJUSTMENTS --- */
        @media (max-width: 1000px) {
            :root { --book-width: 350px; --book-height: 480px; }
            .sidebar { display: none; }
            .prev-btn { left: 20px; }
            .next-btn { right: 20px; }
        }
    </style>
</head>
<body>

    <!-- Sidebar con nombre del proyecto -->
    <div class="sidebar">
        <div class="project-title">Libro Álbum Pedagógico - Edición Digital</div>
    </div>

    <!-- Controles Superiores -->
    <div class="top-controls">
        <button class="btn-icon" onclick="toggleZoom()" title="Zoom"><i class="fas fa-search-plus"></i></button>
        <button class="btn-icon" onclick="toggleFullScreen()" title="Pantalla Completa"><i class="fas fa-expand"></i></button>
    </div>

    <!-- Botón Anterior -->
    <button class="nav-btn prev-btn" id="prevBtn" onclick="goPrev()"><i class="fas fa-chevron-left"></i></button>

    <!-- Escenario del Libro -->
    <div id="stage">
        <div class="book" id="book">
            <!-- El contenido se genera dinámicamente con JS para mantener el HTML limpio -->
        </div>
    </div>

    <!-- Botón Siguiente -->
    <button class="nav-btn next-btn" id="nextBtn" onclick="goNext()"><i class="fas fa-chevron-right"></i></button>

    <script>
        // --- CONFIGURACIÓN DEL CONTENIDO DEL LIBRO ---
        // Definimos las "Hojas" (Papers). Cada Paper tiene Front (Derecha) y Back (Izquierda al voltear).
        // Total páginas lógicas solicitadas: Portada, Guardas, Respeto, Creditos, Dedicatoria, 14 cuerpo, Guardas, Contra.
        
        const bookData = [
            {
                // PAPER 1: Front=Portada, Back=Guarda Delantera (Izq)
                front: {
                    type: "cover-page",
                    bg: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&q=80&w=600",
                    title: "El Eco de las Montañas",
                    text: "Autor: Gemini Creative<br>Ilustraciones: IA Generativa",
                    tooltipTitle: "La Portada",
                    tooltipText: "Es la cara principal del libro. Su función es atraer al lector, presentar el título, el autor y sugerir el tono de la obra mediante la ilustración."
                },
                back: {
                    type: "endpaper",
                    bg: "none", // Usamos patrón CSS en clase endpaper
                    title: "",
                    text: "",
                    tooltipTitle: "Guardas (Delanteras)",
                    tooltipText: "Hojas de papel que unen el cuerpo del libro con las tapas. Suelen tener un color o diseño diferente y marcan la transición al interior."
                }
            },
            {
                // PAPER 2: Front=Guarda Delantera (Der), Back=Hoja de Respeto
                front: {
                    type: "endpaper",
                    bg: "none",
                    title: "",
                    text: "",
                    tooltipTitle: "Guardas (Continuación)",
                    tooltipText: "Las guardas son dobles. Esta parte completa la experiencia visual de entrada antes de llegar al contenido textual."
                },
                back: {
                    type: "respect-page",
                    bg: "https://images.unsplash.com/photo-1486870591958-9b9d0d1dda99?auto=format&fit=crop&q=80&w=600",
                    title: "El Eco de las Montañas",
                    text: "(Hoja de Respeto)",
                    tooltipTitle: "Hoja de Respeto",
                    tooltipText: "También llamada portadilla. Lleva solo el título del libro, en un cuerpo de letra menor. Sirve de cortesía y protección a la portada interior."
                }
            },
            {
                // PAPER 3: Front=Créditos, Back=Dedicatoria
                front: {
                    type: "credits-page",
                    bg: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&q=80&w=600",
                    title: "Créditos Legales",
                    text: "© 2023 Editorial Digital<br>Edición: 1.ª Edición<br>Diseño: CSS3 Experts<br>ISBN: 978-0-000-00000-0<br>Impreso en la Web",
                    tooltipTitle: "Página de Créditos",
                    tooltipText: "Contiene la información legal: copyright, año de edición, traductor, editorial e ISBN. Es el 'carnet de identidad' del libro."
                },
                back: {
                    type: "dedication-page",
                    bg: "https://images.unsplash.com/photo-1542224566-6e85f2e6772f?auto=format&fit=crop&q=80&w=600",
                    title: "Dedicatoria",
                    text: "<i>Para aquellos que buscan<br>la belleza en lo simple.</i>",
                    tooltipTitle: "Dedicatoria",
                    tooltipText: "Un espacio breve y emotivo donde el autor ofrece su obra a una o varias personas especiales. Suele ir en página impar (derecha), pero aquí adaptamos por espacio."
                }
            },
            // --- CUERPO DEL LIBRO (14 Páginas = 7 Hojas) ---
            // Generaremos 7 papers para el cuerpo
        ];

        // Añadir las 14 páginas de cuerpo (7 hojas físicas)
        const storyParts = [
            "El viaje comenzó al amanecer.", "Las nubes bajaron a saludar.",
            "El bosque susurraba secretos.", "Encontró una piedra brillante.",
            "El río cantaba canciones antiguas.", "Los pájaros guiaban el camino.",
            "La montaña se alzaba majestuosa.", "El viento frío acariciaba su rostro.",
            "Un refugio apareció en la niebla.", "El fuego calentó sus manos.",
            "La noche trajo estrellas nuevas.", "El silencio era su compañero.",
            "Al final, entendió el mensaje.", "La naturaleza es nuestro hogar."
        ];

        // Imágenes aleatorias de naturaleza para el cuerpo
        const natureImages = [
            "1472214103451-9374bd1c798e", "1470071459604-3b5ec3a7fe05", "1447752875204-b2f9798c19a3", 
            "1501854140884-074cf2b29752", "1441974231531-c6227db76b6e", "1479030160180-b1860951d6ec", "1519681393784-d120267933ba"
        ];

        for (let i = 0; i < 7; i++) {
            bookData.push({
                front: {
                    type: "body-page",
                    bg: `https://images.unsplash.com/photo-${natureImages[i % natureImages.length]}?auto=format&fit=crop&q=80&w=600`,
                    title: `Capítulo ${i + 1}`,
                    text: storyParts[i * 2],
                    tooltipTitle: "Cuerpo - Página Derecha",
                    tooltipText: "El cuerpo es donde se desarrolla la narrativa. En el libro álbum, la imagen predomina y dialoga con el texto."
                },
                back: {
                    type: "body-page",
                    bg: `https://images.unsplash.com/photo-${natureImages[(i + 1) % natureImages.length]}?auto=format&fit=crop&q=80&w=600`,
                    title: "",
                    text: storyParts[(i * 2) + 1],
                    tooltipTitle: "Cuerpo - Página Izquierda",
                    tooltipText: "La doble página se concibe como una unidad visual. El diseño debe fluir de un lado a otro sin interrupciones bruscas."
                }
            });
        }

        // --- FINAL DEL LIBRO ---
        bookData.push(
            {
                // PAPER FINAL: Front=Guardas Finales, Back=Contraportada
                front: {
                    type: "endpaper",
                    bg: "none",
                    title: "",
                    text: "",
                    tooltipTitle: "Guardas (Finales)",
                    tooltipText: "Cierran el bloque del libro, dando simetría a las guardas delanteras y estructura física a la encuadernación."
                },
                back: {
                    type: "back-cover",
                    bg: "https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?auto=format&fit=crop&q=80&w=600", // Misma que portada o similar
                    title: "Resumen",
                    text: "Un viaje visual a través de paisajes soñados.<br><br>ISBN: 978-0-EX-AM-PLE",
                    tooltipTitle: "Contraportada",
                    tooltipText: "La parte trasera externa. Suele incluir una sinopsis, biografía breve del autor, código de barras y logotipo de la editorial."
                }
            }
        );

        // --- RENDERIZADO DEL DOM ---
        const bookContainer = document.getElementById('book');
        let currentPaperIndex = -1; // -1 significa cerrado (portada visible)
        // El índice representa cuántos papeles se han volteado a la izquierda.

        bookData.forEach((sheet, index) => {
            const paperDiv = document.createElement('div');
            paperDiv.className = 'paper';
            paperDiv.id = `paper-${index}`;
            // Z-Index inicial: Los papeles más arriba (índice bajo) deben estar encima cuando están a la derecha
            paperDiv.style.zIndex = bookData.length - index;

            // Función para generar contenido HTML interno
            const createFace = (faceData, isBack, globalIndex) => {
                return `
                <div class="${isBack ? 'back' : 'front'} ${faceData.type}" style="background-image: url('${faceData.bg}')">
                    <div class="content-overlay">
                        ${faceData.title ? `<h2>${faceData.title}</h2>` : ''}
                        ${faceData.text ? `<p>${faceData.text}</p>` : ''}
                        <span class="page-number">${globalIndex}</span>
                    </div>
                    <i class="fas fa-sparkles edu-icon"></i>
                    <div class="edu-tooltip">
                        <h4><i class="fas fa-info-circle"></i> ${faceData.tooltipTitle}</h4>
                        <p>${faceData.tooltipText}</p>
                    </div>
                </div>`;
            };

            // Numeración lógica de páginas (Portada es 0)
            const frontPageNum = (index * 2) + 1;
            const backPageNum = (index * 2) + 2;

            paperDiv.innerHTML = createFace(sheet.front, false, frontPageNum) + createFace(sheet.back, true, backPageNum);
            bookContainer.appendChild(paperDiv);
        });

        const papers = document.querySelectorAll('.paper');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        // --- LÓGICA DE NAVEGACIÓN (FLIP) ---

        function updateZIndexes() {
            // Recorremos todos los papeles para ajustar z-index según su estado
            papers.forEach((paper, i) => {
                if (i <= currentPaperIndex) {
                    // El papel está volteado a la izquierda
                    // En la pila izquierda, el último volteado (índice mayor) debe estar arriba
                    paper.style.zIndex = i + 1;
                } else {
                    // El papel está a la derecha
                    // En la pila derecha, el primero (índice menor) debe estar arriba
                    paper.style.zIndex = papers.length - i;
                }
            });

            // Ajuste de posición del libro para centrar la vista abierta
            if (currentPaperIndex >= 0 && currentPaperIndex < papers.length - 1) {
                bookContainer.classList.add('opened');
            } else {
                bookContainer.classList.remove('opened');
            }

            // Estado de botones
            prevBtn.disabled = currentPaperIndex === -1;
            nextBtn.disabled = currentPaperIndex === papers.length - 1;
        }

        function goNext() {
            if (currentPaperIndex < papers.length - 1) {
                currentPaperIndex++;
                papers[currentPaperIndex].classList.add('flipped');
                updateZIndexes();
            }
        }

        function goPrev() {
            if (currentPaperIndex >= 0) {
                papers[currentPaperIndex].classList.remove('flipped');
                currentPaperIndex--;
                updateZIndexes();
            }
        }

        // Navegación con teclado
        document.addEventListener('keydown', (e) => {
            if (e.key === "ArrowRight") goNext();
            if (e.key === "ArrowLeft") goPrev();
        });

        // --- FUNCIONES DE UTILIDAD (ZOOM, FULLSCREEN) ---
        let zoomLevel = 1;
        function toggleZoom() {
            const stage = document.getElementById('stage');
            if (zoomLevel === 1) {
                zoomLevel = 1.25;
            } else {
                zoomLevel = 1;
            }
            stage.style.transform = `scale(${zoomLevel})`;
        }

        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    alert(`Error al intentar pantalla completa: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        // Inicializar
        updateZIndexes();

    </script>
</body>
</html>
