<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Libro Álbum Interactivo</title>
    <style>
        /* ===================================================================
        ESTILOS CSS PARA EL LIBRO
        =================================================================== 
        */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f0f0;
            display: flex; /* Centrar el libro en la pantalla */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }

        /* Contenedor principal del libro */
        .book-container {
            position: relative;
            width: 300px; /* Ancho de una página */
            height: 450px; /* Altura de una página (formato vertical) */
            perspective: 1500px; /* Profundidad 3D para la rotación */
            transform-style: preserve-3d;
        }

        /* Estilo para cada página */
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-origin: left;
            transition: transform 0.6s ease-in-out;
            backface-visibility: hidden;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            background-color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            text-align: center;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        /* Estilo de la imagen de fondo de las páginas */
        .page-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            z-index: 1;
        }

        /* Superposición oscura para el texto en las portadas */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            z-index: 2;
        }

        /* Contenido de texto en las páginas */
        .page-content {
            position: relative;
            z-index: 3;
            color: white;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
        }

        /* Estilo para la portada (tapa frontal) */
        #page-0 {
            transform: rotateY(0deg);
            z-index: 21; /* Asegura que la portada esté al frente */
            cursor: pointer;
        }

        /* Estilo para la contraportada (tapa trasera) */
        #page-20 {
            background-color: #111; /* Color oscuro para contraste */
            color: #ccc;
            transform: rotateY(180deg); /* La contraportada inicia girada */
            left: 0;
            position: absolute;
        }

        /* Clases para el giro de páginas */
        .flipped {
            transform: rotateY(-180deg) !important;
        }
        
        /* Clase para ocultar las páginas ya giradas y evitar superposición visual */
        .hidden-flipped {
            z-index: -1;
        }

        /* Estilos específicos del contenido */
        .page-legal, .page-dedication {
            background-color: #f7f7f7;
            color: #333;
            font-size: 14px;
            line-height: 1.6;
        }

        .page-respect, .page-guard {
            background-color: #fefefe;
        }

        .page-guard {
             background-color: #d1d1d1; /* Un color neutro para las guardas */
             box-shadow: none;
        }
        
        .page-respect {
            background-color: #fff; /* Página de respeto debe ser blanca pura */
        }
        
        .page-cover-back .page-content {
            font-style: italic;
            font-size: 14px;
            color: #ccc;
        }

        /* Hotspot (punto interactivo) */
        .hotspot {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            font-size: 18px;
            color: #333;
        }

        .hotspot-info {
            position: absolute;
            bottom: 100%;
            right: 0;
            width: 200px;
            background-color: #333;
            color: white;
            padding: 10px;
            border-radius: 5px;
            text-align: left;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            font-size: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .hotspot:hover .hotspot-info {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 10px);
        }

        .hotspot-info h4 {
            margin-top: 0;
            border-bottom: 1px solid #555;
            padding-bottom: 5px;
            margin-bottom: 5px;
            font-size: 14px;
        }

        /* Controles de navegación */
        .nav-button {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            padding: 10px 15px;
            font-size: 24px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            cursor: pointer;
            z-index: 100;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .nav-button:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }

        #prev-button {
            left: 20px;
        }

        #next-button {
            right: 20px;
        }

        .disabled {
            opacity: 0.5;
            cursor: default;
        }

    </style>
</head>
<body>

    <button id="prev-button" class="nav-button">←</button>

    <div class="book-container" id="book-container">
        </div>

    <button id="next-button" class="nav-button">→</button>

    <script>
        /* ===================================================================
        CONTENIDO Y LÓGICA JAVASCRIPT
        =================================================================== 
        */

        const bookContainer = document.getElementById('book-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        let currentPage = 0; // Índice de la página actualmente visible (0 a 20)

        // ------------------------------------------------------------------
        // ARRAY DE CONTENIDO DEL LIBRO (CON LAS NUEVAS IMÁGENES)
        // ------------------------------------------------------------------
        const bookContent = [
            // ------------------------------------------------------------------
            // PÁGINA 1: Portada (Tapa Dura Frontal - índice 0)
            // ------------------------------------------------------------------
            { 
                type: 'cover', 
                img: 'https://images.unsplash.com/photo-1549414605-e3d08f7d9830?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // Nueva Portada: Niño con libro en un mundo mágico
                hotspot: {
                    title: 'La Portada',
                    text: 'Es la "cara" del libro. Debe incluir el título y el nombre del autor e ilustrador. La imagen es lo más importante, ya que nos da una pista sobre la historia.'
                }
            },
            
            // PÁGINA 2: Guardas (Interior de Tapa Dura - índice 1)
            { 
                type: 'guard',
                hotspot: {
                    title: 'Las Guardas',
                    text: 'Son las páginas que unen la tapa dura con el interior. Su función es proteger el libro. A veces tienen colores o ilustraciones que nos introducen al mundo de la historia.'
                }
            },
            
            // PÁGINA 3: Página de Respeto (Blanca)
            { type: 'respect' },
            
            // PÁGINA 4: Créditos
            { 
                type: 'legal', 
                title: 'Créditos Editoriales',
                text: 'Ilustraciones: Artista Ejemplo\nHistoria: Escritor Ejemplo\nDiseño: Tu Nombre Aquí\nPublicado por: Editorial Creativa, 2025\nHecho en Colombia\nISBN: 978-0-00-000000-0',
                hotspot: {
                    title: 'Página de Créditos',
                    text: 'Aquí se lista quiénes hicieron el libro (autor, ilustrador, editorial) y la información legal, como el año de publicación y el ISBN (un código único del libro).'
                }
            },
            
            // PÁGINA 5: Dedicatoria
            { 
                type: 'dedication', 
                text: 'A todos los que se atreven a soñar con mundos dibujados.',
                hotspot: {
                    title: 'La Dedicatoria',
                    text: 'Es un breve texto, usualmente en una página propia, donde el autor o ilustrador le ofrece su obra a una persona o grupo especial en su vida.'
                }
            },
            
            // ------------------------------------------------------------------
            // PÁGINA 6 a 19: Cuerpo del Libro (Ilustraciones de la Historia)
            // ------------------------------------------------------------------
            { 
                // PÁGINA 6: Introducción - El mundo del personaje
                type: 'body',
                img: 'https://images.unsplash.com/photo-1536440136659-1eef628c688d?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // Casa pequeña, ambiente cálido
                hotspot: { 
                    title: 'Páginas de Cuerpo',
                    text: 'Es donde la historia se desarrolla. En un libro álbum, la ilustración es la protagonista y debe ocupar la mayor parte del espacio, contando la historia visualmente.'
                }
            },
            { type: 'body', img: 'https://images.unsplash.com/photo-1522075782449-0d603a1b80e7?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },   // PÁGINA 7: El personaje principal
            { type: 'body', img: 'https://images.unsplash.com/photo-1524334336214-411a09d3c509?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },     // PÁGINA 8: Viaje, camino en el bosque
            { type: 'body', img: 'https://images.unsplash.com/photo-1562916174-569614741366?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' }, // PÁGINA 9: Encuentro con un amigo/obstáculo
            { type: 'body', img: 'https://images.unsplash.com/photo-1517400326588-3485c2b29156?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },      // PÁGINA 10: La aventura continúa (globo)
            { type: 'body', img: 'https://images.unsplash.com/photo-1502691887640-192e276f5784?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },    // PÁGINA 11: Escena nocturna
            { type: 'body', img: 'https://images.unsplash.com/photo-1447045437887-a36c561a3577?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },      // PÁGINA 12: Personajes en un mercado
            { type: 'body', img: 'https://images.unsplash.com/photo-1519782806253-fd6c568f2378?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },     // PÁGINA 13: Momento de reflexión/magia
            { type: 'body', img: 'https://images.unsplash.com/photo-1522046465490-b18408f61596?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },        // PÁGINA 14: Escena en el mar/agua
            { type: 'body', img: 'https://images.unsplash.com/photo-1528646270685-30b12b598d1a?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },      // PÁGINA 15: Bosque y animales
            { type: 'body', img: 'https://images.unsplash.com/photo-1536737527633-9111c1d76378?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },      // PÁGINA 16: Vista de la ciudad/reino
            { type: 'body', img: 'https://images.unsplash.com/photo-1516086822262-55cf5575510f?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },   // PÁGINA 17: Momento de celebración
            { type: 'body', img: 'https://images.unsplash.com/photo-1522067755866-c958afb525f2?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },  // PÁGINA 18: El final del viaje/regreso
            { type: 'body', img: 'https://images.unsplash.com/photo-1520696956667-27b233a5933a?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D' },   // PÁGINA 19: Momento de paz/final
            
            // PÁGINA 20: Guardas (Interior de Contratapa)
            { type: 'guard' }, 
            
            // ------------------------------------------------------------------
            // PÁGINA 21: Contraportada (Tapa Dura Trasera - índice 20)
            // ------------------------------------------------------------------
            { 
                type: 'cover-back', 
                img: 'https://images.unsplash.com/photo-1512850183-6c7997f81468?q=80&w=800&h=1200&fit=crop&auto=format&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D', // Nueva Contraportada: Ilustración tranquila de un árbol
                reflection: 'Las mejores historias no terminan en la última página, sino que comienzan en tu imaginación.',
                hotspot: {
                    title: 'La Contraportada',
                    text: 'Es la parte de atrás del libro. Usualmente tiene un breve resumen de la historia (sinopsis), una ilustración final, o la información de la editorial y el código de barras.'
                }
            }
        ];

        // ------------------------------------------------------------------
        // FUNCIONES PRINCIPALES
        // ------------------------------------------------------------------

        // Crea el elemento DOM de una página
        function createPageElement(content, index) {
            const page = document.createElement('div');
            page.className = `page page-${content.type}`;
            page.id = `page-${index}`;
            page.style.zIndex = bookContent.length - index;

            // Contenido visual (imagen)
            if (content.img) {
                const img = document.createElement('img');
                img.className = 'page-image';
                img.src = content.img;
                page.appendChild(img);
                
                // Overlay para que el texto se vea mejor en la tapa
                if (content.type.startsWith('cover')) {
                    const overlay = document.createElement('div');
                    overlay.className = 'overlay';
                    page.appendChild(overlay);
                }
            }

            // Contenido de texto
            const textContent = document.createElement('div');
            textContent.className = 'page-content';
            
            if (content.type === 'cover') {
                textContent.innerHTML = `<h1>TÍTULO DEL LIBRO</h1><h2>Autor</h2><p>Ilustrador</p>`;
                textContent.style.color = 'white';
            } else if (content.type === 'legal') {
                textContent.innerHTML = `<h3>${content.title}</h3><p>${content.text.replace(/\n/g, '<br>')}</p>`;
                textContent.style.color = '#333';
            } else if (content.type === 'dedication') {
                textContent.innerHTML = `<p style="font-style: italic; font-size: 18px;">${content.text}</p>`;
                textContent.style.color = '#333';
            } else if (content.type === 'cover-back') {
                textContent.innerHTML = `<p>${content.reflection}</p>`;
            } else if (content.type === 'body') {
                // Aquí podrías añadir el texto narrativo de la página de la historia
                textContent.innerHTML = `<p style="color: black; background-color: rgba(255,255,255,0.7); padding: 5px; border-radius: 3px;">El texto narrativo va aquí...</p>`;
            }
            
            page.appendChild(textContent);


            // Hotspot
            if (content.hotspot) {
                const hotspot = document.createElement('div');
                hotspot.className = 'hotspot';
                hotspot.innerHTML = 'ⓘ';
                
                const info = document.createElement('div');
                info.className = 'hotspot-info';
                info.innerHTML = `<h4>${content.hotspot.title}</h4><p>${content.hotspot.text}</p>`;
                
                hotspot.appendChild(info);
                page.appendChild(hotspot);
            }

            return page;
        }

        // Inicializa el libro creando todas las páginas
        function initializeBook() {
            bookContent.forEach((content, index) => {
                const page = createPageElement(content, index);
                bookContainer.appendChild(page);
            });
            updateNavigationButtons();
        }

        // Gira las páginas hacia adelante
        function nextPage() {
            if (currentPage < bookContent.length - 2) { // Permitir girar hasta la penúltima página (para ver la contraportada)
                const pageToFlip = document.getElementById(`page-${currentPage}`);
                const nextPageElement = document.getElementById(`page-${currentPage + 1}`);
                
                if (pageToFlip) {
                    pageToFlip.classList.add('flipped');
                    // Oculta la página girada un momento después del inicio de la transición
                    setTimeout(() => {
                        pageToFlip.classList.add('hidden-flipped');
                    }, 300); 
                }
                
                // La página siguiente se convierte en la activa visualmente
                if (nextPageElement) {
                     nextPageElement.classList.remove('hidden-flipped');
                }

                currentPage += 2; // Avanzamos dos páginas (par e impar)
                updateNavigationButtons();
            }
        }

        // Gira las páginas hacia atrás
        function prevPage() {
            if (currentPage > 0) {
                currentPage -= 2; // Retrocedemos dos páginas (par e impar)

                const pageToUnflip = document.getElementById(`page-${currentPage}`);
                const prevPageElement = document.getElementById(`page-${currentPage - 1}`);

                if (pageToUnflip) {
                    // Muestra la página antes de la transición inversa
                    pageToUnflip.classList.remove('hidden-flipped');
                    setTimeout(() => {
                        pageToUnflip.classList.remove('flipped');
                    }, 50); // Pequeño retardo para asegurar que la clase flipped se quita
                }
                
                if (prevPageElement) {
                    prevPageElement.classList.remove('hidden-flipped');
                }

                updateNavigationButtons();
            }
        }

        // Habilita o deshabilita los botones de navegación
        function updateNavigationButtons() {
            prevButton.disabled = currentPage === 0;
            nextButton.disabled = currentPage >= bookContent.length - 1;

            prevButton.classList.toggle('disabled', prevButton.disabled);
            nextButton.classList.toggle('disabled', nextButton.disabled);
        }

        // Event Listeners
        nextButton.addEventListener('click', nextPage);
        prevButton.addEventListener('click', prevPage);
        
        // Agregar listener para la portada (página 0)
        document.addEventListener('DOMContentLoaded', () => {
             initializeBook();
             document.getElementById('page-0').addEventListener('click', nextPage);
        });

    </script>
</body>
</html>
